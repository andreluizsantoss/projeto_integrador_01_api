<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SOS Sorocaba</title>
    <link rel="stylesheet" href="../V3/src/styles/forms.css">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .chart-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useRef, useEffect } = React;

        // Chart Component
        function ChartComponent({ type, data, title }) {
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            useEffect(() => {
                if (chartRef.current && data) {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }

                    const ctx = chartRef.current.getContext('2d');
                    chartInstance.current = new Chart(ctx, {
                        type: type,
                        data: data,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false
                        }
                    });
                }

                return () => {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                };
            }, [type, data]);

            return (
                <div className="chart-card">
                    <h3>{title}</h3>
                    <div style={{ height: '250px', position: 'relative' }}>
                        <canvas ref={chartRef}></canvas>
                    </div>
                </div>
            );
        }

        // Dashboard Component
        function Dashboard() {
            const mockPatients = [
                { sexo: "Masculino", idade: 45 },
                { sexo: "Feminino", idade: 38 },
                { sexo: "Masculino", idade: 52 },
                { sexo: "Feminino", idade: 29 },
                { sexo: "Masculino", idade: 61 }
            ];

            const genderData = {
                labels: ['Masculino', 'Feminino'],
                datasets: [{
                    data: [3, 2],
                    backgroundColor: ['#3B82F6', '#EC4899']
                }]
            };

            const ageData = {
                labels: ['18-30', '31-45', '46-60', '60+'],
                datasets: [{
                    label: 'Pacientes',
                    data: [1, 2, 1, 1],
                    backgroundColor: ['#10B981', '#F59E0B', '#EF4444', '#8B5CF6']
                }]
            };

            return (
                <>
                    <section className="hero-section">
                        <h1>ðŸ“Š Dashboard EstatÃ­stico</h1>
                        <p className="hero-description">
                            AnÃ¡lise completa dos dados do SOS Sorocaba
                        </p>
                    </section>

                    <div className="stats-cards">
                        <div className="stat-card">
                            <div className="stat-number">10</div>
                            <div className="stat-label">Total de Pacientes</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-number">9</div>
                            <div className="stat-label">Pacientes Ativos</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-number">4</div>
                            <div className="stat-label">Moradores de Rua</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-number">45</div>
                            <div className="stat-label">Idade MÃ©dia</div>
                        </div>
                    </div>

                    <div className="charts-grid">
                        <ChartComponent
                            type="doughnut"
                            data={genderData}
                            title="ðŸ‘¥ DistribuiÃ§Ã£o por GÃªnero"
                        />
                        <ChartComponent
                            type="bar"
                            data={ageData}
                            title="ðŸ“Š Pacientes por Faixa EtÃ¡ria"
                        />
                    </div>
                </>
            );
        }

        // Layout
        function Layout({ children }) {
            return (
                <>
                    <div className="headerContent">
                        <header>
                            <h1>SOS Sorocaba</h1>
                            <h4>Sistema de GestÃ£o Social</h4>
                        </header>
                    </div>
                    <div className="mainContent">
                        <main>{children}</main>
                    </div>
                    <div className="footerContent">
                        <footer>
                            <h3>SOS Sorocaba</h3>
                            <h4>Plataforma de AssistÃªncia Social</h4>
                        </footer>
                    </div>
                </>
            );
        }

        function App() {
            return (
                <Layout>
                    <Dashboard />
                </Layout>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>